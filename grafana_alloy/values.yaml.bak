receivers:
  filelog:
    include: ["/var/log/containers/*.log"]
    start_at: beginning

processors:
  resource:
    attributes:
      - key: k8s.pod.name
        from_attribute: k8s.pod.name
  batch:
    timeout: 5s
    send_batch_size: 50

exporters:
  file:
    path: "/tmp/alloy_logs.json"

service:
  pipelines:
    logs:
      receivers: [filelog]
      processors: [batch, resource]
      exporters: [file]

observers:
  k8s_observer:
    auth_type: serviceAccount

